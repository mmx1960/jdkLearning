# ThreadLocal

ThreadLocal 用起来简单，概念也很简单，就是存储线程内共享变量，在同一个线程里保持可见性。

为什么要分析这么简单的东西呢？

1. 是为了锻炼自己的源码功底，对技术不能保持只会用而不懂其原理的态度。
2. 是为了后续深入Thread类做个基础准备。

## 操作接口

### 公共接口

我把ThreadLocal比作一个工具类，分析一个工具类首先要从他的公共接口看起，即对外提供了哪些方法。

从ThreadLocal层面来看，主要分成了三个操作

- get
- set
- remove

#### get操作

顾名思义，就是从当前线程中获取这个ThreadLocal对象维护的数据，由此我们可以看到，一个ThreadLocal对象内，只维护一种类型的数据，可以是Map，也可以是List，还可以是某个自定义类型的对象。这个他并不关心。

#### set操作

和上面一样，由于同时只有一个对象，所以每次set前，肯定需要先执行get操作的，不然就失去了ThreadLocal设计的本意。

#### remove操作

从线程中移除掉这个ThreadLocal存储的内容。

大致先介绍下，后面再讨论实现方式。

### 数据结构

单独看ThreadLocal十分简单，但是其内部定义了一个静态内部类ThreadLocalMap，同时这个类里面也定义了一个Entry，作为数据实际的存储。

- ThreadLocalMap
- Entry


### 核心源码

